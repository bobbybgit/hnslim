(function(s,e){typeof exports=="object"&&typeof module!="undefined"?module.exports=e(require("@hotwired/stimulus")):typeof define=="function"&&define.amd?define(["@hotwired/stimulus"],e):(s=typeof globalThis!="undefined"?globalThis:s||self,s["stimulus-places-autocomplete"]=e(s.Stimulus))})(this,function(s){"use strict";class e extends s.Controller{initialize(){this.placeChanged=this.placeChanged.bind(this)}connect(){typeof google!="undefined"&&this.initAutocomplete()}initAutocomplete(){this.autocomplete=new google.maps.places.Autocomplete(this.addressTarget,this.autocompleteOptions),this.autocomplete.addListener("place_changed",this.placeChanged)}placeChanged(){this.place=this.autocomplete.getPlace();const t=this.place.address_components;if(t!==void 0){const i=this.formatAddressComponents(t);this.setAddressComponents(i)}this.place.geometry!==void 0&&this.setGeometry(this.place.geometry)}setAddressComponents(t){this.hasStreetNumberTarget&&(this.streetNumberTarget.value=t.street_number||""),this.hasRouteTarget&&(this.routeTarget.value=t.route||""),this.hasCityTarget&&(this.cityTarget.value=t.locality||""),this.hasCountyTarget&&(this.countyTarget.value=t.administrative_area_level_2||""),this.hasStateTarget&&(this.stateTarget.value=t.administrative_area_level_1||""),this.hasCountryTarget&&(this.countryTarget.value=t.country||""),this.hasPostalCodeTarget&&(this.postalCodeTarget.value=t.postal_code||"")}setGeometry(t){this.hasLongitudeTarget&&(this.longitudeTarget.value=t.location.lng().toString()),this.hasLatitudeTarget&&(this.latitudeTarget.value=t.location.lat().toString())}get autocompleteOptions(){return{fields:["address_components","geometry"],componentRestrictions:{country:this.countryValue}}}preventSubmit(t){t.code==="Enter"&&t.preventDefault()}formatAddressComponents(t){const i={};return t.forEach(o=>{const a=o.types[0];i[a]=o.long_name}),i}}return e.targets=["address","city","streetNumber","route","postalCode","country","county","state","longitude","latitude"],e.values={country:Array},e});
